{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023-03-04-finding-outdated-aws-icons-in-drawio-files/","result":{"data":{"site":{"siteMetadata":{"title":"kevinhakanson.com","author":"Kevin Hakanson"}},"markdownRemark":{"id":"7899f7ee-2697-5d60-a471-00d86faa336e","excerpt":"I admit to being an AWS service icon snob - when I see outdated icons being used, I look down on the diagram.  For example, this image with multiple versions of…","html":"<p>I admit to being an AWS service icon snob - when I see outdated icons being used, I look down on the diagram.  For example, this image with multiple versions of old AWS Lambda icons:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d4cb9ce63745fddb5025fc4f2a22b420/13ae7/LambdaLambdaLambda.drawio.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACB0lEQVR42lWSW0iTcRjGv5su66qrLryI9CYKCbUF2ckR6YUr7STSSUKKWhS4pBvTC6nAiqQuCiTIjkO0rFgFluA6LKSFulZ52Lc5Fm5zJ7fv2/nXf7v4rBde3oc/7/P8H973lRCRii2SDrgLkHw+X6zZbJbBYQv9Twd5MjBM34NnjIxaWQ7Rl02JTEIuLTIjnnJIEbsF+5X9uDsqSb+9Rj4eLLarqsrmXXsp31pH1U4DK9esp6nFqMnlFiZQH9eQtLSiDhhQ7leQcZqR7MYybK0lzHRWM9PTQMz6sEhICsFttQfZUXeIw0JoXfl2jp9u0wTT8hjBjhWE72widKOUQJuEYu1BmmyvYPz8RhymchxdNYQ+mYsERVHQG5rR1zcLZ+eo3nOAk8Z2TTApf8FrWkWgrxH/bT3eS6uJjd4SDs+WYju1Fle3Hv+9E8Jhf5EQjy9R23iMLfoGNuh2o9Pvo+WMSRNUpj8ye6EEuUuH3FnF7MUywu/vIsW+veR7twHf5Ur4cF2bYWE5r96M8Mj8nBev34nlDDH2+asmqLon8PQewXOzCflqPfO9R4nahpC8/hA+eZrAr3H+BCOEojGNFBF4MRRmKZ4gFI4I14nlGabSOH84cbtk5uZcOKYcxKJRJKdjCr/fj28hwO+fTrzznv/Op1D/xdrRCKyIxSlJlURCKX6azmT4C3zVCHYA4DKiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lambda icons from AWS17, AWS18, and AWS19\"\n        title=\"\"\n        src=\"/static/d4cb9ce63745fddb5025fc4f2a22b420/13ae7/LambdaLambdaLambda.drawio.png\"\n        srcset=\"/static/d4cb9ce63745fddb5025fc4f2a22b420/12f09/LambdaLambdaLambda.drawio.png 148w,\n/static/d4cb9ce63745fddb5025fc4f2a22b420/e4a3f/LambdaLambdaLambda.drawio.png 295w,\n/static/d4cb9ce63745fddb5025fc4f2a22b420/13ae7/LambdaLambdaLambda.drawio.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>However, these are a pain to update by hand.  Last month I created GitHub issue #3337: <a href=\"https://github.com/jgraph/drawio/issues/3337\">Feature to “upgrade” AWS Icons from old icons sets (e.g. AWS 17, AWS 18)</a></p>\n<p>Today I wrote a quick and dirty TypeScript CLI that checks <code class=\"language-text\">.drawio</code> files for outdated AWS icons.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ npx ts-node drawiolint LambdaLambdaLambda.drawio \nProcessing <span class=\"token function\">file</span> LambdaLambdaLambda.drawio <span class=\"token punctuation\">(</span>modified <span class=\"token number\">2023</span>-02-04T19:04:48.267Z<span class=\"token punctuation\">)</span>\n\nChecking tab Page-1 \n\n❌ <span class=\"token assign-left variable\">id</span><span class=\"token operator\">=</span>-sQPLy2-axNeOzcSWdUq-1\n  AWS17 Lambda\n  mxgraph.aws3.lambda \n\n\n❌ <span class=\"token assign-left variable\">id</span><span class=\"token operator\">=</span>-sQPLy2-axNeOzcSWdUq-3\n  AWS18 Lambda\n  mxgraph.aws4.productIcon mxgraph.aws4.lambda</code></pre></div>\n<p>Here are the relevant parts of the draw.io XML for those three icons:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxCell</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-sQPLy2-axNeOzcSWdUq-1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AWS17 Lambda<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.lambda;fillColor=#F58534;gradientColor=none;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">vertex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxGeometry</span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>163<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>76.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>93<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>geometry<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mxCell</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxCell</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-sQPLy2-axNeOzcSWdUq-2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AWS Lambda<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">vertex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxGeometry</span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>330<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>170.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>78<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>78<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>geometry<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mxCell</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxCell</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-sQPLy2-axNeOzcSWdUq-3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>AWS18 Lambda<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;strokeColor=#ffffff;fillColor=#232F3E;dashed=0;verticalLabelPosition=middle;verticalAlign=bottom;align=center;html=1;whiteSpace=wrap;fontSize=10;fontStyle=1;spacing=3;shape=mxgraph.aws4.productIcon;prIcon=mxgraph.aws4.lambda;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parent</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">vertex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mxGeometry</span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>159.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>80<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>geometry<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mxCell</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>After a bunch of XML parsing code to pull out the <code class=\"language-text\">id</code>, <code class=\"language-text\">label</code> and <code class=\"language-text\">style</code> from the <code class=\"language-text\">&lt;mxCell></code>, the <code class=\"language-text\">verifyShape</code> function gets called and looks for <code class=\"language-text\">mxgraph.aws3</code> or <code class=\"language-text\">mxgraph.aws4.productIcon</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">verifyShape</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  label<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  styles<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> shape <span class=\"token operator\">=</span> styles<span class=\"token punctuation\">[</span><span class=\"token string\">'shape'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> prIcon <span class=\"token operator\">=</span> styles<span class=\"token punctuation\">[</span><span class=\"token string\">'prIcon'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> resIcon <span class=\"token operator\">=</span> styles<span class=\"token punctuation\">[</span><span class=\"token string\">'resIcon'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    shape<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mxgraph.aws3.'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n    shape<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mxgraph.aws4.productIcon'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\n❌ id=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\n  </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>label<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\n  </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>shape<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prIcon<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Maybe once day I’ll clean up the code, add update capabilities, and publish it somewhere.</p>","frontmatter":{"title":"Finding outdated AWS icons in draw.io files","description":null,"date":"March 4, 2023","tags":["aws"],"canonical":null}}},"pageContext":{"slug":"/2023-03-04-finding-outdated-aws-icons-in-drawio-files/","previous":{"fields":{"slug":"/2023-02-06-hello-rust-wasm-nodejs/"},"frontmatter":{"tags":["rust","wasm"]}},"next":{"fields":{"slug":"/2023-03-13-cloudformation-output-values-using-the-aws-cli/"},"frontmatter":{"tags":["aws","cli","cloudformation"]}}}},"staticQueryHashes":["2589769190","97908498"],"slicesMap":{}}