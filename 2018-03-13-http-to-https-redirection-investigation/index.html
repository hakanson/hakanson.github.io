<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27;; script-src &#x27;self&#x27; www.google-analytics.com &#x27;sha256-fQImZ7ieEyeZ6ScFGPfZrE+hF13DfVe/lq4qez7R0pM=&#x27; &#x27;sha256-LlwhFlKRnr+AD79v6EatnMeQR/A0sziyJeXb1hLpcuk=&#x27; &#x27;sha256-S+C0XOFRy9Fmgk6jKpM8ct01oXNeRT4hIW7TkFV2KgQ=&#x27;; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27;; font-src &#x27;self&#x27; data:; connect-src &#x27;self&#x27;; img-src &#x27;self&#x27; data: www.google-analytics.com;"/><style data-href="/styles.09023e7ef6b32789d68d.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 3.13.0"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Kevin Hakanson&#x27;s Blog RSS Feed" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=6004a4629feb58918b636b2d4129ef34" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=6004a4629feb58918b636b2d4129ef34"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=6004a4629feb58918b636b2d4129ef34"/><title data-react-helmet="true">HTTP to HTTPS Redirection Investigation | kevinhakanson.com</title><link data-react-helmet="true" rel="canonical" href="https://kevinhakanson.com/2018-03-13-http-to-https-redirection-investigation"/><meta data-react-helmet="true" name="description" content="The recent efforts related to Google and Mozilla are Deprecating Existing Symantec Certificates had me revisit another HTTPS topic:  HTTP to HTTPS Redirection…"/><meta data-react-helmet="true" property="og:title" content="HTTP to HTTPS Redirection Investigation"/><meta data-react-helmet="true" property="og:description" content="The recent efforts related to Google and Mozilla are Deprecating Existing Symantec Certificates had me revisit another HTTPS topic:  HTTP to HTTPS Redirection…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@hakanson"/><meta data-react-helmet="true" name="twitter:title" content="HTTP to HTTPS Redirection Investigation"/><meta data-react-helmet="true" name="twitter:description" content="The recent efforts related to Google and Mozilla are Deprecating Existing Symantec Certificates had me revisit another HTTPS topic:  HTTP to HTTPS Redirection…"/><link as="script" rel="preload" href="/webpack-runtime-7b97437492918936b962.js"/><link as="script" rel="preload" href="/framework-4d07967334ed8f73bc33.js"/><link as="script" rel="preload" href="/app-c03b9a77bf3f141a2178.js"/><link as="script" rel="preload" href="/948f538aecb9da63027be03fd70ab6e11fd8dbf6-1e6056bbdf4b796e680b.js"/><link as="script" rel="preload" href="/01880bb5b0f840cec82dcff49ce64b10fe584016-59937effac8e685db875.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-5eac1beb031a33c0dd20.js"/><link as="fetch" rel="preload" href="/page-data/2018-03-13-http-to-https-redirection-investigation/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2589769190.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/97908498.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:58.5rem;padding:1.21875rem 1.21875rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">kevinhakanson.com</a></h3></header><main><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;margin-bottom:0"><li><a rel="prev" href="/2018-03-08-access-logs-from-aws-services">← previous</a></li><li><a rel="next" href="/2018-03-15-amazon-load-balancers-x-forwarded-headers-and-proxy-protocol-support">next →</a></li></ul></nav><article><header><h1 style="margin-top:1.625rem;margin-bottom:0">HTTP to HTTPS Redirection Investigation</h1><p style="font-size:0.87055rem;line-height:1.625rem;display:block;margin-bottom:1.625rem">March 13, 2018<span><span> <a style="box-shadow:inset 0 -1px 0 rgba(27,31,35,.12);border-radius:2px;padding:.15em 4px;text-decoration:none;font-weight:600;font-size:12px;height:20px;line-height:15px;color:inherit;margin-left:0.40625rem;background:#ededed" href="/tags/http">#<!-- -->http</a></span><span> <a style="box-shadow:inset 0 -1px 0 rgba(27,31,35,.12);border-radius:2px;padding:.15em 4px;text-decoration:none;font-weight:600;font-size:12px;height:20px;line-height:15px;color:inherit;margin-left:0.40625rem;background:#ededed" href="/tags/webdev">#<!-- -->webdev</a></span><span> <a style="box-shadow:inset 0 -1px 0 rgba(27,31,35,.12);border-radius:2px;padding:.15em 4px;text-decoration:none;font-weight:600;font-size:12px;height:20px;line-height:15px;color:inherit;margin-left:0.40625rem;background:#ededed" href="/tags/security">#<!-- -->security</a></span></span></p></header><section><p>The recent efforts related to <a href="https://blog.qualys.com/ssllabs/2017/09/26/google-and-mozilla-deprecating-existing-symantec-certificates">Google and Mozilla are Deprecating Existing Symantec Certificates</a> had me revisit another HTTPS topic:  HTTP to HTTPS Redirection.</p>
<p><strong>Redirection</strong> is one of the items checked by <a href="https://observatory.mozilla.org/">Observatory by Mozilla</a> and supported by the command line scanner.  Below is partial output from <code class="language-text">httpobs-local-scan app1.example.com</code> containing the redirect flow:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"redirection"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"destination"</span><span class="token operator">:</span> <span class="token string">"https://app1.example.com/app/login?lastReqId=2362881&amp;lkn=loginAllParms"</span><span class="token punctuation">,</span>
    <span class="token property">"expectation"</span><span class="token operator">:</span> <span class="token string">"redirection-to-https"</span><span class="token punctuation">,</span>
    <span class="token property">"pass"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">"redirects"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"result"</span><span class="token operator">:</span> <span class="token string">"redirection-not-to-https-on-initial-redirection"</span><span class="token punctuation">,</span>
    <span class="token property">"route"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"http://app1.example.com/"</span><span class="token punctuation">,</span>
        <span class="token string">"http://app1.example.com/app/setcookie?lastReqId=2309797&amp;lkn=cookieSetMachine"</span><span class="token punctuation">,</span>
        <span class="token string">"http://app1.example.com/app/setcookie?lastReqId=22f4772&amp;lkn=cookieSetMachine&amp;noCookie=on"</span><span class="token punctuation">,</span>
        <span class="token string">"http://app1.example.com/app/login?lastReqId=23754c6&amp;lkn=loginAllParms"</span><span class="token punctuation">,</span>
        <span class="token string">"https://app1.example.com/app/login?lastReqId=2362881&amp;lkn=loginAllParms"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"score_description"</span><span class="token operator">:</span> <span class="token string">"Redirects to https eventually, but initial redirection is to another http URL"</span><span class="token punctuation">,</span>
    <span class="token property">"score_modifier"</span><span class="token operator">:</span> <span class="token number">-10</span><span class="token punctuation">,</span>
    <span class="token property">"status_code"</span><span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span></code></pre></div>
<p>App1 is hosted in a company data center behind an F5 BIG-IP VIP, so some of the redirect logic can be found in iRules.  Notice that this rule on VIP Port 80 does a redirect based on a valid hostname.</p>
<div class="gatsby-highlight" data-language="tcl"><pre class="language-tcl"><code class="language-tcl">ltm rule app1.example.com_REDIR <span class="token punctuation">{</span>
    when HTTP_REQUEST <span class="token punctuation">{</span>
        <span class="token builtin">if</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>HTTP::host<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"app1.example.com"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>
        HTTP::redirect <span class="token string">"http://app1.example.com[HTTP::uri]"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This could always just do an initial HTTPS redirect (which adds an additional redirect), but at least the cookies would be secure.  There is probably some application work in App1 to minimize the redirect counts.</p>
<div class="gatsby-highlight" data-language="tcl"><pre class="language-tcl"><code class="language-tcl">when HTTP_REQUEST <span class="token punctuation">{</span>
    HTTP::redirect <span class="token string">"https://app1.example.com[HTTP::uri]"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A scan of App2 passes.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"redirection"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"destination"</span><span class="token operator">:</span> <span class="token string">"https://app2.example.com/"</span><span class="token punctuation">,</span>
    <span class="token property">"expectation"</span><span class="token operator">:</span> <span class="token string">"redirection-to-https"</span><span class="token punctuation">,</span>
    <span class="token property">"pass"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"redirects"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"result"</span><span class="token operator">:</span> <span class="token string">"redirection-to-https"</span><span class="token punctuation">,</span>
    <span class="token property">"route"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"http://app2.example.com/"</span><span class="token punctuation">,</span>
        <span class="token string">"https://app2.example.com/"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"score_description"</span><span class="token operator">:</span> <span class="token string">"Initial redirection is to https on same host, final destination is https"</span><span class="token punctuation">,</span>
    <span class="token property">"score_modifier"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"status_code"</span><span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It has the expected iRule on VIP Port 80 that always redirects to HTTPS.</p>
<div class="gatsby-highlight" data-language="tcl"><pre class="language-tcl"><code class="language-tcl">ltm rule APP2_REDIR_HTTP <span class="token punctuation">{</span>
    when HTTP_REQUEST <span class="token punctuation">{</span>
        HTTP::redirect <span class="token string">"https://app2.example.com[HTTP::uri]"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A scan of App3 shows a failure.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"redirection"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"destination"</span><span class="token operator">:</span> <span class="token string">"http://app3.example.com/"</span><span class="token punctuation">,</span>
    <span class="token property">"expectation"</span><span class="token operator">:</span> <span class="token string">"redirection-to-https"</span><span class="token punctuation">,</span>
    <span class="token property">"pass"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">"redirects"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">"result"</span><span class="token operator">:</span> <span class="token string">"redirection-missing"</span><span class="token punctuation">,</span>
    <span class="token property">"route"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"http://app3.example.com/"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"score_description"</span><span class="token operator">:</span> <span class="token string">"Does not redirect to an https site"</span><span class="token punctuation">,</span>
    <span class="token property">"score_modifier"</span><span class="token operator">:</span> <span class="token number">-20</span><span class="token punctuation">,</span>
    <span class="token property">"status_code"</span><span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span></code></pre></div>
<p>But the browser shows App3 is secure, which can be explained by looking at the network graph. The full site loads, then client-side JavaScript initiates a redirect (at the performance cost of about 1/2 second).</p>
<p>In AWS, CloudFront supports a Redirect HTTP to HTTPS (see <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-https-viewers-to-cloudfront.html">Requiring HTTPS for Communication Between Viewers and CloudFront - Amazon CloudFront</a> )</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 370px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/85a127e5b9286ea7408fb16ea1f38f72/1efb2/pastedImage_27.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 18.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVQY04WP3UrDQBhE8/4P5VUFFYTUJLg2Yf/SJF+60qbbFEFMjiS9ERQcGJirMzOJtQ6Rjrre46ylaW/ZGE3fH2D+4hpPGGOx1lI7i6/3aKOpyh0/Nc8ziVIK5xzSCVVZorWhaVq01jTe0ka4y4TiJSXPcoq8QKk3tmmKelV478mynBDeV2jCPwpXeFDC89Mjm839Cix3FedhYBjOxBgJIXAZxxtwmiYWL3N/53m9/PkxcjyeOPQ9IkLbyZ/ly+VvQDMtRgy+fUYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Viewer Protocol Policy"
        title="Viewer Protocol Policy"
        src="/static/85a127e5b9286ea7408fb16ea1f38f72/1efb2/pastedImage_27.png"
        srcset="/static/85a127e5b9286ea7408fb16ea1f38f72/12f09/pastedImage_27.png 148w,
/static/85a127e5b9286ea7408fb16ea1f38f72/e4a3f/pastedImage_27.png 295w,
/static/85a127e5b9286ea7408fb16ea1f38f72/1efb2/pastedImage_27.png 370w"
        sizes="(max-width: 370px) 100vw, 370px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>AWS ELB requires you to configure this in your web server (see <a href="https://aws.amazon.com/premiumsupport/knowledge-center/redirect-http-https-elb/">Redirect HTTP Traffic to HTTPS Using ELB</a> ) but ALB now supports redirects as an option on the HTTP listener.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5e9e4808e35ace6fe1f2819653449735/20982/pastedImage_65.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA80lEQVQoz6WS266EIAxF+f9f9IkTUVQUL+Md3ZPdCTkm48zLkOxYCl1tsSpNUxTWYt93hBCwbZvYV9359ovveq6stej7Hm3boqoqDMOAeZ4xjiOmaRLRx/2/73XOe9xHm1KknueJ4zikwl+XyvMcWZZJFQSz/FcL4a1NJgzhkHufpLTWMMagLEvUdQ3nnMh7j6Zp4FwtftpMzKfhioC3CpMkgdZ/EtB1nQTwWxSFJKFoN97DmFQ6icDblpmVAAIZTOCyLAKJoj8mW9f1e4UcG0L5t6nh8RAgA+N70qY4DTz7WiHfJ8LiCBHCwKsIZLvXCu+AT7Sou1ATMkNTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="ALB HTTP Listener settings"
        title="ALB HTTP Listener settings"
        src="/static/5e9e4808e35ace6fe1f2819653449735/fcda8/pastedImage_65.png"
        srcset="/static/5e9e4808e35ace6fe1f2819653449735/12f09/pastedImage_65.png 148w,
/static/5e9e4808e35ace6fe1f2819653449735/e4a3f/pastedImage_65.png 295w,
/static/5e9e4808e35ace6fe1f2819653449735/fcda8/pastedImage_65.png 590w,
/static/5e9e4808e35ace6fe1f2819653449735/20982/pastedImage_65.png 778w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>The Apache rewrite rule is below and would be the recommended approach for App3.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} =http
RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]</code></pre></div>
<p>Now, take a couple minutes and go read <a href="https://scotthelme.co.uk/wifi-pineapple-karma-sslstrip/">The WiFi Pineapple - Using Karma and SSLstrip to MiTM secure connections</a>  </p>
<blockquote>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 525px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/ef30aed61c7a27b81f78d828d78e8e77/7349d/31233122are-you-my-network3.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHIqIkH/8QAFxABAQEBAAAAAAAAAAAAAAAAAQIRIv/aAAgBAQABBQJwiXG3v//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABMf/aAAgBAgEBPwFMf//EABkQAAEFAAAAAAAAAAAAAAAAAAEAEBEhMf/aAAgBAQAGPwIbbGF//8QAGBABAAMBAAAAAAAAAAAAAAAAAQARMSH/2gAIAQEAAT8hewdQbUUl6cF5P//aAAwDAQACAAMAAAAQe8//xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAwEBPxBX/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEx/9oACAECAQE/EKwf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBgfD/2gAIAQEAAT8QwwkrvSPEc6QBbrxAK34DAdT/2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Karma saying it is the device&#39;s preferred network"
        title="Karma saying it is the device&#39;s preferred network"
        src="/static/ef30aed61c7a27b81f78d828d78e8e77/7349d/31233122are-you-my-network3.jpg"
        srcset="/static/ef30aed61c7a27b81f78d828d78e8e77/a80bd/31233122are-you-my-network3.jpg 148w,
/static/ef30aed61c7a27b81f78d828d78e8e77/1c91a/31233122are-you-my-network3.jpg 295w,
/static/ef30aed61c7a27b81f78d828d78e8e77/7349d/31233122are-you-my-network3.jpg 525w"
        sizes="(max-width: 525px) 100vw, 525px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
</blockquote>
<p>Let me highlight a key point of this attack:</p>
<blockquote>
<p>SSLstrip works by monitoring HTTP traffic and waiting for links or redirects that use HTTPS. Once it finds a link or redirect using HTTPS it will transparently re-write it to the HTTP equivalent and pass it along to the victim.</p>
</blockquote>
<p>Given that HTTP to HTTPS redirection isn’t sufficient to protect our applications, what now? Make sure to leverage security focused HTTP headers, including <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security">Strict-Transport-Security</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">Content-Security-Policy</a>.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Strict-Transport-Security: max-age=31536000;
Content-Security-Policy: upgrade-insecure-requests;</code></pre></div>
<p>The iRule code to set these looks like</p>
<div class="gatsby-highlight" data-language="tcl"><pre class="language-tcl"><code class="language-tcl">when HTTP_RESPONSE <span class="token punctuation">{</span>
     HTTP::header replace <span class="token string">"Strict-Transport-Security"</span> <span class="token string">"max-age=31536000;"</span>
     HTTP::header replace <span class="token string">"Content-Security-Policy"</span> <span class="token string">"upgrade-insecure-requests;"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>And for use in an Apache config</p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfModule</span> <span class="token attr-name">mod_headers.c</span><span class="token punctuation">></span></span>
   Header set Strict-Transport-Security "max-age=31536000;"
   Header set Content-Security-Policy "upgrade-insecure-requests;"
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">></span></span></code></pre></div>
<p>Because the browser “remembers” to always connect over HTTPS, there is both a security gain and a performance gain of skipping the first round-trip just for HTTP to HTTPS redirection.</p>
<p>Later on, the Content-Security-Policy could be updated to ensure only https connections, but this has the side effect of not allowing inline scripts or styles.</p>
<blockquote>
<p>default-src https:; form-action https:; connect-src https: wss:; upgrade-insecure-requests</p>
</blockquote></section><hr style="margin-bottom:1.625rem"/><footer><div style="display:flex;margin-bottom:1.625rem"><div data-gatsby-image-wrapper="" style="position:relative;overflow:hidden;width:50px;height:50px;margin-right:0.8125rem;margin-bottom:0;min-width:50px;border-radius:100%" class="gatsby-image-wrapper"><div aria-hidden="true" data-placeholder-image="" style="height:100%;left:0;position:absolute;top:0;width:100%"></div><picture><source type="image/webp" data-srcset="/static/6004a4629feb58918b636b2d4129ef34/dbc4a/profile-pic.webp 50w,/static/6004a4629feb58918b636b2d4129ef34/d8057/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;border-radius:50%;opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/6004a4629feb58918b636b2d4129ef34/6ac16/profile-pic.jpg" data-srcset="/static/6004a4629feb58918b636b2d4129ef34/6ac16/profile-pic.jpg 50w,/static/6004a4629feb58918b636b2d4129ef34/e07e1/profile-pic.jpg 100w" alt="Kevin Hakanson"/></picture><noscript><picture><source type="image/webp" srcSet="/static/6004a4629feb58918b636b2d4129ef34/dbc4a/profile-pic.webp 50w,/static/6004a4629feb58918b636b2d4129ef34/d8057/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;border-radius:50%;opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/6004a4629feb58918b636b2d4129ef34/6ac16/profile-pic.jpg" srcSet="/static/6004a4629feb58918b636b2d4129ef34/6ac16/profile-pic.jpg 50w,/static/6004a4629feb58918b636b2d4129ef34/e07e1/profile-pic.jpg 100w" alt="Kevin Hakanson"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><p> <!-- -->Multi-Cloud Certified Architect | DevSecOps | AppSec | Web Platform | Speaker | Learner | Builder<br/><a href="https://twitter.com/hakanson">Twitter</a> | <a href="https://www.linkedin.com/in/kevinhakanson/">LinkedIn</a> | <a href="https://github.com/hakanson">GitHub</a> | <a href="https://stackoverflow.com/users/22514/kevin-hakanson">Stack Overflow</a> | <a href="https://www.credly.com/users/kevin-hakanson">Credly</a></p></div></footer></article></main><footer>© <!-- -->2021<!-- --> Kevin Hakanson (built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a>)</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-46763107-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018-03-13-http-to-https-redirection-investigation";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e6b5355c9ecf751d8025.js"],"app":["/app-c03b9a77bf3f141a2178.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-afc182647bd07f015b43.js"],"component---src-pages-404-js":["/component---src-pages-404-js-aee17e864fc0d80b7229.js"],"component---src-pages-index-js":["/component---src-pages-index-js-720d710d783c17d9bf6a.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-f672db33479b96c98628.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-5eac1beb031a33c0dd20.js"],"component---src-templates-page-js":["/component---src-templates-page-js-be25f9d01f0074662c33.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-1a43d4b33a6476235576.js"]};/*]]>*/</script><script src="/polyfill-e6b5355c9ecf751d8025.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-5eac1beb031a33c0dd20.js" async=""></script><script src="/01880bb5b0f840cec82dcff49ce64b10fe584016-59937effac8e685db875.js" async=""></script><script src="/948f538aecb9da63027be03fd70ab6e11fd8dbf6-1e6056bbdf4b796e680b.js" async=""></script><script src="/app-c03b9a77bf3f141a2178.js" async=""></script><script src="/framework-4d07967334ed8f73bc33.js" async=""></script><script src="/webpack-runtime-7b97437492918936b962.js" async=""></script></body></html>