{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019-07-07-aws-signature-authorization-using-postman","result":{"data":{"site":{"siteMetadata":{"title":"kevinhakanson.com","author":"Kevin Hakanson"}},"markdownRemark":{"id":"20bf728e-416a-579e-9bcc-79da68798818","excerpt":"The other day I ran across Use Postman to Call a REST API - Amazon API Gateway, which highlighted that Postman can generate AWS Signatures for authorization…","html":"<p>The other day I ran across <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-use-postman-to-call-api.html\">Use Postman to Call a REST API - Amazon API Gateway</a>, which highlighted that Postman can generate AWS Signatures for authorization (see <a href=\"https://learning.getpostman.com/docs/postman/sending_api_requests/authorization#amazon-web-services-aws-authentication\">Authorization | Postman Learning Center</a>).  When I wrote <a href=\"../2017-08-15-aws-chalice-amazon-api-gateway-and-aws-iam-authorization\">AWS Chalice, Amazon API Gateway, and AWS IAM Authorization</a>, I used the <a href=\"https://github.com/jmenga/requests-aws-sign\">jmenga/requests-aws-sign</a> library inside my Python code to sign my HTTP requests, but this would be an interesting way to be more interactive.</p>\n<p>I used <a href=\"https://docs.aws.amazon.com/cli/latest/reference/configure/\">aws cli configure</a> to get the values out of <code class=\"language-text\">~/.aws/credentials</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ aws configure get aws_access_key_id\r\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\r\n$ aws configure get aws_secret_access_key\r\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\r\n$ aws configure get aws_session_token\r\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span></code></pre></div>\n<p>I created a <a href=\"https://learning.getpostman.com/docs/postman/environments_and_globals/intro_to_environments_and_globals\">Postman environment</a> and manually added these values as variables.  I was able to export this to a JSON format that can also be used for import.  I plan on looking at a way to script the creation of this file and avoid the extra cutting/pasting when my session credentials expire or maybe there is a way <a href=\"https://learning.getpostman.com/docs/postman/scripts/pre_request_scripts\">Pre-request scripts</a> can fetch them.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\r\n     <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"638759e0-bc49-420d-be3a-794ff7c8a08b\"</span><span class=\"token punctuation\">,</span>\r\n     <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws\"</span><span class=\"token punctuation\">,</span>\r\n     <span class=\"token property\">\"values\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n          <span class=\"token punctuation\">{</span>\r\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_access_key_id\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">{</span>\r\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_secret_access_key\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">{</span>\r\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_session_token\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\r\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\r\n          <span class=\"token punctuation\">}</span>\r\n     <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n     <span class=\"token property\">\"_postman_variable_scope\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"environment\"</span><span class=\"token punctuation\">,</span>\r\n     <span class=\"token property\">\"_postman_exported_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-07-07T17:23:27.037Z\"</span><span class=\"token punctuation\">,</span>\r\n     <span class=\"token property\">\"_postman_exported_using\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Postman/7.2.2\"</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If I switch the Authorization Type to AWS Signature, I can set the AccessKey, SecretKey, and Session Token to the variables from my environment.  I also set the Service Name to <code class=\"language-text\">sts</code> for my first test, which is my favorite AWS API for testing: <a href=\"https://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html\">GetCallerIdentity - AWS Security Token Service</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c3efb7100d0dda51298416045cea6ed/84bf8/pastedImage_69.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVQ4y2VTS47UMBTMzbgOZ2DJBdizYcEB5gJIbBASEhsQsAExIIbpTjqO4///FXpOp6cBSxXbsV2v3nN5sGKEESdYMSEahZQLaq3/oZTCIB6nlIrW+rXS+kZI9U2uK1Ypm9aahlkITLPAcZowjkdM09QxjuNlPM8z1u0QrVJCLJKyle7mg9GPnrv04p1G0DNp62hwVkNPB6h5hHUWhmENrLXQWvfeOYcYI8IG4j7FAGkCbg8Kp8VQ8g7GGAzWaARnEYPvh3LOneAa1jl455CdpWT11qdEtSRCCQSqABF552iQSkMbA6NVP8S12mvWWuvo8xRRU0DNCbU81LnUbZ2I4L3H4A8/EcURHLl4e1lgpXtrfBFKdGRWmEtf35FS6gI6Yb55hvrl7fko9S+nzpuYfFfZaum4VnedAe8NIWBgCqJegg5uHIkLvEdncJCO6/E5MBOxwitC+gtMyDbhyNy4d94j9RT/TnfHJWX824h6VF7kTXsNszMb4qamMEkuHUzIqXeFtVYqG1gJ1dYol0I55f1lEPclJwYTUcyZ0gZWTb0MIXaLDWpdyXQDG7LGwBmFmiMIjRpx4dk+lWesglhZSBExJ4ScKGQ2e4AQYjP2/bzgdhL0/XgC43RU93LJSiwFYml2kTQuC52kqtn6DJ+aTAUHn1oOmZAKKBbi/7CObVNqu1can29/jL/G6eniy+NxXt8cDvyG1XtqeGJNenmcpRfripTyRwJe+RBVyIVLTq09uGPwMdLXacKn33fp292dkEqR1gpaKzJGw8SAdL6ci1HP9trmdJl3QhMCjutK91LipNRuWjo/QSps3s2gdLZVYyfR1rD92gj5tv8A9HDWgGFKFJkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman GetCallerIdentityResponse\"\n        title=\"Postman GetCallerIdentityResponse\"\n        src=\"/static/1c3efb7100d0dda51298416045cea6ed/fcda8/pastedImage_69.png\"\n        srcset=\"/static/1c3efb7100d0dda51298416045cea6ed/12f09/pastedImage_69.png 148w,\n/static/1c3efb7100d0dda51298416045cea6ed/e4a3f/pastedImage_69.png 295w,\n/static/1c3efb7100d0dda51298416045cea6ed/fcda8/pastedImage_69.png 590w,\n/static/1c3efb7100d0dda51298416045cea6ed/efc66/pastedImage_69.png 885w,\n/static/1c3efb7100d0dda51298416045cea6ed/84bf8/pastedImage_69.png 1162w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>If I switch to “No Auth”, you can see the <strong>MissingAuthenticationToken</strong> error.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6850d73364b4433bedf890fbf1cff857/4c7dc/pastedImage_71.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiklEQVQoz22S24oUQQyG+/m98EnEN1B8BsUbQVRkh+3uququ87Hrk5rpWWfFwEcokgrJn0xBC7RY2KXAyJVgNTElcs6UUq703u/cbcTnFOMnevhKdd17jzGmT+u6IoRkFYJ5WVjmmflkWRZGfN93rLU45+507xzaet59jrz/EtHWdWM0k1KKXWuklH9RCiUVQogXRtHRgdZ6gDW6i832Nx9Mf/tRdyEVu5J9CimRoiduKyU4Sq2UVjlao9ZKa43jOB7pw7eb75A7pM7RCMH3aYxijCGEwNBhjDSK3O3U60XPq6YlQ0mQI0cpHGfuyJvG5/HpVRf/vh8Y+akW8pjkkVKuDU3bfMEag7GDW7fRGWrJ1FavYz9ScsbnSMiJeJJKZtu2q/7T2PDTqriIDSUdq4goEdC6Yx0YA95Dqv2FXDnpJxByw1jPFLwn18ZPKfn2/Qe/L8/Ms+TpWaB2i3URG/NNhs7pX9NGAIgxMaUY2bzj1ziPcULbxr5vKCWRQqCsweV0X9H/6feCkT/xSwXRonRhXAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman ErrorResponse\"\n        title=\"Postman ErrorResponse\"\n        src=\"/static/6850d73364b4433bedf890fbf1cff857/fcda8/pastedImage_71.png\"\n        srcset=\"/static/6850d73364b4433bedf890fbf1cff857/12f09/pastedImage_71.png 148w,\n/static/6850d73364b4433bedf890fbf1cff857/e4a3f/pastedImage_71.png 295w,\n/static/6850d73364b4433bedf890fbf1cff857/fcda8/pastedImage_71.png 590w,\n/static/6850d73364b4433bedf890fbf1cff857/efc66/pastedImage_71.png 885w,\n/static/6850d73364b4433bedf890fbf1cff857/c83ae/pastedImage_71.png 1180w,\n/static/6850d73364b4433bedf890fbf1cff857/4c7dc/pastedImage_71.png 1599w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"AWS Signature Authorization using Postman","description":null,"date":"July 7, 2019","tags":["http","aws","security"],"canonical":null}}},"pageContext":{"slug":"/2019-07-07-aws-signature-authorization-using-postman","previous":{"fields":{"slug":"/2019-06-14-programmatically-adding-ip-restrictions-to-an-azure-app-service"},"frontmatter":{"tags":["security","azure","powershell","cloudshell"]}},"next":{"fields":{"slug":"/2019-08-12-scanning-for-ows-sql-injection-protection"},"frontmatter":{"tags":["security","codequality","devops","powershell"]}}}},"staticQueryHashes":["2589769190","97908498"]}