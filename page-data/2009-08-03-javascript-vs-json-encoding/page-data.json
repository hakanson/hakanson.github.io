{"componentChunkName":"component---src-templates-blog-post-js","path":"/2009-08-03-javascript-vs-json-encoding","webpackCompilationHash":"f141a48750e2a6a883f2","result":{"data":{"site":{"siteMetadata":{"title":"kevinhakanson.com","author":"Kevin Hakanson"}},"markdownRemark":{"id":"b2743559-f43b-5126-b03e-c72e72758270","excerpt":"In the process of converting some JavaScript code which creates an object from a JSON string from using (the evil) eval to using JSON.parse (which is native in…","html":"<p>In the process of converting some JavaScript code which creates an object from a JSON string from using (the evil) eval to using JSON.parse (which is native in <a href=\"http://blogs.msdn.com/ie/archive/2008/09/10/native-json-in-ie8.aspx\">IE8</a> and <a href=\"https://developer.mozilla.org/En/Using_JSON_in_Firefox\">Firefox 3.5</a>), a strange bug was encountered.  Take the following JavaScript snippet, which can be validated using <a href=\"http://www.jslint.com/\">JSLint</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"name\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Kevin\\\\'s Folder\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>However, if you take <code class=\"language-text\">{ &quot;name&quot; : &quot;Kevin\\\\&#39;s Folder&quot; }</code> and try and validate with <a href=\"http://www.jsonlint.com/\">JSONLint</a>, it fails parsing.  Why is that?  Look at the definition for string at <a href=\"http://www.json.org/\">JSON.org</a>, and you see that it’s not valid to escape the single quote character.  This appears to be because only double quotes are a valid wrapper for a string in JSON, where either single quotes or double quotes are allowed for JavaScript strings.  The JavaScript escape utility used wouldn’t know how the consumer would wrap the string, so it played it safe and escaped both.</p>\n<p>The moral of this story?  JSON is a proper subset of pure JavaScript object literals.</p>","frontmatter":{"title":"JavaScript vs. JSON encoding","date":"August 03, 2009","tags":["javascript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2009-08-03-javascript-vs-json-encoding","previous":{"fields":{"slug":"/2009-07-06-you-cant-escape-encoding"},"frontmatter":{"tags":["webdev"]}},"next":{"fields":{"slug":"/2012-02-01-customer-upload-speeds"},"frontmatter":{"tags":["ux"]}}}}}