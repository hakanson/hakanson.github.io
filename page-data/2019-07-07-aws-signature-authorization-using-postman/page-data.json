{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019-07-07-aws-signature-authorization-using-postman","result":{"data":{"site":{"siteMetadata":{"title":"kevinhakanson.com","author":"Kevin Hakanson"}},"markdownRemark":{"id":"20bf728e-416a-579e-9bcc-79da68798818","excerpt":"The other day I ran across Use Postman to Call a REST API - Amazon API Gateway, which highlighted that Postman can generate AWS Signatures for authorization…","html":"<p>The other day I ran across <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-use-postman-to-call-api.html\">Use Postman to Call a REST API - Amazon API Gateway</a>, which highlighted that Postman can generate AWS Signatures for authorization (see <a href=\"https://learning.getpostman.com/docs/postman/sending_api_requests/authorization#amazon-web-services-aws-authentication\">Authorization | Postman Learning Center</a>).  When I wrote <a href=\"../2017-08-15-aws-chalice-amazon-api-gateway-and-aws-iam-authorization\">AWS Chalice, Amazon API Gateway, and AWS IAM Authorization</a>, I used the <a href=\"https://github.com/jmenga/requests-aws-sign\">jmenga/requests-aws-sign</a> library inside my Python code to sign my HTTP requests, but this would be an interesting way to be more interactive.</p>\n<p>I used <a href=\"https://docs.aws.amazon.com/cli/latest/reference/configure/\">aws cli configure</a> to get the values out of <code class=\"language-text\">~/.aws/credentials</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ aws configure get aws_access_key_id\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\n$ aws configure get aws_secret_access_key\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\n$ aws configure get aws_session_token\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span></code></pre></div>\n<p>I created a <a href=\"https://learning.getpostman.com/docs/postman/environments_and_globals/intro_to_environments_and_globals\">Postman environment</a> and manually added these values as variables.  I was able to export this to a JSON format that can also be used for import.  I plan on looking at a way to script the creation of this file and avoid the extra cutting/pasting when my session credentials expire or maybe there is a way <a href=\"https://learning.getpostman.com/docs/postman/scripts/pre_request_scripts\">Pre-request scripts</a> can fetch them.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n     <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"638759e0-bc49-420d-be3a-794ff7c8a08b\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"values\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_access_key_id\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_secret_access_key\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_session_token\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_variable_scope\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"environment\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_exported_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-07-07T17:23:27.037Z\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_exported_using\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Postman/7.2.2\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If I switch the Authorization Type to AWS Signature, I can set the AccessKey, SecretKey, and Session Token to the variables from my environment.  I also set the Service Name to <code class=\"language-text\">sts</code> for my first test, which is my favorite AWS API for testing: <a href=\"https://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html\">GetCallerIdentity - AWS Security Token Service</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c3efb7100d0dda51298416045cea6ed/84bf8/pastedImage_69.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACh0lEQVQ4y2VUS47UMBDNzbgOZ2DJBdizYcEB5gJIbBASEhsQsGHEgBi6k3ScxP9/FVVOp6cHLL3YcZJXz1Wv0hkxoBYnNGLEoCXGlLGU8h9yzgzgdYwxK6XeSqVuxCJvl3XFdVkq7UE3CYHjJLAfRxyGHkeax7YeLutpmnDdPgICinmBZBZ780mrJy9tfPVBoVcTKGOhs0ahGo8opwGNNagZRqMxBilim621GEJAvwF4jsHjoj3eHSWeZg3RWdRaY2c0sRNJ8K59lFJqBNcwBEdI1kAkAW2OEUqOgNkDQkEEAHoHukWSQmLWSraPOFd7zmqtDe0+BizRY0kRS37Icy7bc+JD5xx27vgLg+iRI2dnLg9Y6T4qF0KKhsQKqXD8fAepbQIaYbp5geXb+/On0K58dH6JyXeVteSGa3XXJ+B3vffYMQWt2waDB0fiBO/RGRyk4Xp9DsxErPCKEB6BCdkmHJkHz5b2Yjvi4+PuuBwZ/x1EyFH5Ib+05zBZvSFsajKTpNzAhHz0ppCiQ97ASqDUCok6IsW0dwbwnFNkMBEEQtzAqqGlwYdmsU6uK+hmYA2G8map/UoKVJ4KFTjxbJ/Cd6wCWJknCwUi9xTEJza7R0Ed14x9mGa8GwX86E/IOPXysMxJijlTi1VDXTbMM5wWWZJxCV2sS8x4pDn5ROnJCCED71MDsG3ImQcy99e7n8PvYXw+u/x0mNZ3xyP3sPxIwp4ZHV/30+IEFSrG9JkK+cb5ID3lj+tIwi/u6Bz15nf6AXz5cx9v7+/p5yFBUdcQQFNbajpOPBfnYtSzvbZ7uNw3Qk2V6SmPB/qLnKTcTQvnFoTM5t0MCmdbVXYSbAO3rY2Qq/0X9HDWgKxbFSAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman GetCallerIdentityResponse\"\n        title=\"Postman GetCallerIdentityResponse\"\n        src=\"/static/1c3efb7100d0dda51298416045cea6ed/fcda8/pastedImage_69.png\"\n        srcset=\"/static/1c3efb7100d0dda51298416045cea6ed/12f09/pastedImage_69.png 148w,\n/static/1c3efb7100d0dda51298416045cea6ed/e4a3f/pastedImage_69.png 295w,\n/static/1c3efb7100d0dda51298416045cea6ed/fcda8/pastedImage_69.png 590w,\n/static/1c3efb7100d0dda51298416045cea6ed/efc66/pastedImage_69.png 885w,\n/static/1c3efb7100d0dda51298416045cea6ed/84bf8/pastedImage_69.png 1162w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If I switch to “No Auth”, you can see the <strong>MissingAuthenticationToken</strong> error.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6850d73364b4433bedf890fbf1cff857/4c7dc/pastedImage_71.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkklEQVQoz21SW47UMBDM+fngJCtuAOIMrPhBQrBCjDaJ48SP+Jm4qJ5JhlmEpVK77XZ3dbm7YBSMGrBMCnYaEZxBTAk5Z5RSrmitnTiX3Pcpxs9o4Suqb+u6wlrbunEcodSEUSn0w4Ch79EfGOjL/bIscM7Be3+irbTGrXj6EvHhOXLvm7UGndYaizGYpukveKYnzULqDkkqDIwxAjhrmppde/fRtvefuGf8oqfWBbaX4oo4jyjBo9SKslXs24bK/Ua77/sjmtjtZhuQidT4ACGsrZNWWJlOgOggLUmScx163fW8aloyUBJzRez09yNW4jp5LI/esPjXf4DEp1qQpZNHMLEQ6ub+Qj0srBPc2EZvUcmisnVp+xGFLFYyCzkhHkiMnef5qn8nP/x71LiomR/h+dsRWgVQezgPFgArU6Xa7sgVB9oBsMBGQmQYGJ3rhp/M/u37D/y6vHJkWORVQS+OSSNczDcZKP/NvsUmF1wxJnQcTsyrx4uMh4wQqS8L2WqOD880pfBs6/ii/6OdCSP+APFLBdHt0Hu5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman ErrorResponse\"\n        title=\"Postman ErrorResponse\"\n        src=\"/static/6850d73364b4433bedf890fbf1cff857/fcda8/pastedImage_71.png\"\n        srcset=\"/static/6850d73364b4433bedf890fbf1cff857/12f09/pastedImage_71.png 148w,\n/static/6850d73364b4433bedf890fbf1cff857/e4a3f/pastedImage_71.png 295w,\n/static/6850d73364b4433bedf890fbf1cff857/fcda8/pastedImage_71.png 590w,\n/static/6850d73364b4433bedf890fbf1cff857/efc66/pastedImage_71.png 885w,\n/static/6850d73364b4433bedf890fbf1cff857/c83ae/pastedImage_71.png 1180w,\n/static/6850d73364b4433bedf890fbf1cff857/4c7dc/pastedImage_71.png 1599w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"AWS Signature Authorization using Postman","description":null,"date":"July 07, 2019","tags":["http","aws","security"],"canonical":null}}},"pageContext":{"slug":"/2019-07-07-aws-signature-authorization-using-postman","previous":{"fields":{"slug":"/2019-06-14-programmatically-adding-ip-restrictions-to-an-azure-app-service"},"frontmatter":{"tags":["security","azure","powershell","cloudshell"]}},"next":{"fields":{"slug":"/2019-08-12-scanning-for-ows-sql-injection-protection"},"frontmatter":{"tags":["security","codequality","devops","powershell"]}}}},"staticQueryHashes":["2589769190","3567236516"]}