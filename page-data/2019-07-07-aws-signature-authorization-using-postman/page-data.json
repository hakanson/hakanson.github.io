{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019-07-07-aws-signature-authorization-using-postman","webpackCompilationHash":"b9cb1a030f9c4ce8c0c0","result":{"data":{"site":{"siteMetadata":{"title":"kevinhakanson.com","author":"Kevin Hakanson"}},"markdownRemark":{"id":"20bf728e-416a-579e-9bcc-79da68798818","excerpt":"The other day I ran across Use Postman to Call a REST API - Amazon API Gateway, which highlighted that Postman can generate AWS Signatures for authorization…","html":"<p>The other day I ran across <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-use-postman-to-call-api.html\">Use Postman to Call a REST API - Amazon API Gateway</a>, which highlighted that Postman can generate AWS Signatures for authorization (see <a href=\"https://learning.getpostman.com/docs/postman/sending_api_requests/authorization#amazon-web-services-aws-authentication\">Authorization | Postman Learning Center</a>).  When I wrote <a href=\"../2017-08-15-aws-chalice-amazon-api-gateway-and-aws-iam-authorization\">AWS Chalice, Amazon API Gateway, and AWS IAM Authorization</a>, I used the <a href=\"https://github.com/jmenga/requests-aws-sign\">jmenga/requests-aws-sign</a> library inside my Python code to sign my HTTP requests, but this would be an interesting way to be more interactive.</p>\n<p>I used <a href=\"https://docs.aws.amazon.com/cli/latest/reference/configure/\">aws cli configure</a> to get the values out of <code class=\"language-text\">~/.aws/credentials</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ aws configure get aws_access_key_id\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\n$ aws configure get aws_secret_access_key\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span>\n$ aws configure get aws_session_token\n<span class=\"token punctuation\">[</span>redacted<span class=\"token punctuation\">]</span></code></pre></div>\n<p>I created a <a href=\"https://learning.getpostman.com/docs/postman/environments_and_globals/intro_to_environments_and_globals\">Postman environment</a> and manually added these values as variables.  I was able to export this to a JSON format that can also be used for import.  I plan on looking at a way to script the creation of this file and avoid the extra cutting/pasting when my session credentials expire or maybe there is a way <a href=\"https://learning.getpostman.com/docs/postman/scripts/pre_request_scripts\">Pre-request scripts</a> can fetch them.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n     <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"638759e0-bc49-420d-be3a-794ff7c8a08b\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"values\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_access_key_id\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_secret_access_key\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aws_session_token\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[redacted]\"</span><span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_variable_scope\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"environment\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_exported_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-07-07T17:23:27.037Z\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token property\">\"_postman_exported_using\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Postman/7.2.2\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If I switch the Authorization Type to AWS Signature, I can set the AccessKey, SecretKey, and Session Token to the variables from my environment.  I also set the Service Name to <code class=\"language-text\">sts</code> for my first test, which is my favorite AWS API for testing: <a href=\"https://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html\">GetCallerIdentity - AWS Security Token Service</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c3efb7100d0dda51298416045cea6ed/2f382/pastedImage_69.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.4526678141136%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACf0lEQVQ4y3VUy4pUMRC9f+reH3LhUhDcuBAUwYUirgQXCgPOMAxK2zP3/chNbt5Vnko/6AENXVRyKzmpU6fSlVM9r0PLaujYjB07rdj7wDHG/1lmDGPM3bKoN/tefamHJc/zwtM0UdV1LXfDwHXb8UPTcFPX3MC3bVv8aT6OI8/zLEbi1TLFZljsk1faP329UtcPiAHQWMubWVl1D6yXkS3WZttYr5q1May15g1r+e6cY3swkrkDk2E2SEixsxupZeZK65VXTNxm5CMOukJNgAREwDYAG7OxRzwYTQEJBO8oxEg5BuKcSMqAvVRpF3gyjpcVWYKKHM45o46eU0pMRMUi1nHTnKzhFANiscTFYjx4ubxy+1t2Pz5zrH9xDo4p+ALgkJ3400jOsl8XDhoGuiFEWDibsCqA6forx48vOe9vDicBIhlCxbKRMM9HI2SRkVnO6fztHMM5KVHFF0MOHzCJlVKljiUD0BUxRCR7EgaHz0IdfcmQcBvhVgE7ERRACQrgibb3rogGMR5RvaRsIOyjDPkCsLQPlM3Hi6IAQd1YRIEgIsTRC5jsK5S3VREUPfaVI+8c9oWIOpHUCmpmWBIfi6KRrLNp8zbDeHOW4ElKhJfC1dDU3OMV9BNeACh6aSn5oZy4mC4zv6hKGTFl9GISz6s2PC8LVxOeUrdouutHvvq9W6939du2cc/va33fNBvXTfiEl/ni/sF9a0fN46KVDfzB2HQlExeJfDHmFSWqQJFSTvkP0H/udnf10D+btvX9jC7X+KOw1nxHvu+ct7VFjwp/JNej0CsJDekzPihXamih5gSqN01Dt13HCrU8qOpFZcr0WK9/6HfuBNHhL/exiM6on5FBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman GetCallerIdentityResponse\"\n        title=\"Postman GetCallerIdentityResponse\"\n        src=\"/static/1c3efb7100d0dda51298416045cea6ed/b9e4f/pastedImage_69.png\"\n        srcset=\"/static/1c3efb7100d0dda51298416045cea6ed/cf440/pastedImage_69.png 148w,\n/static/1c3efb7100d0dda51298416045cea6ed/d2d38/pastedImage_69.png 295w,\n/static/1c3efb7100d0dda51298416045cea6ed/b9e4f/pastedImage_69.png 590w,\n/static/1c3efb7100d0dda51298416045cea6ed/f9b6a/pastedImage_69.png 885w,\n/static/1c3efb7100d0dda51298416045cea6ed/2f382/pastedImage_69.png 1162w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If I switch to “No Auth”, you can see the <strong>MissingAuthenticationToken</strong> error.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6850d73364b4433bedf890fbf1cff857/30051/pastedImage_71.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.03252032520326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABk0lEQVQoz3VSWY7dIBD0uZNzJSfIZ44QjTLS6GWewdhgNgOmUu0lSiINUqkB9VrVQ3IT1mnEajS8UcjeYSsFtVa01g703m8cBzw550eM4Stq+L7ntft1hbW2D1orKK2hlMY4jv9A83+aWJDOIQTEGG90sT5EfHvJB3jv4jdoBszLwkBzJT4LaFpJqi5rjMFCvwvd2QXKWHz64vCZeKqpz2bCkHJGTqzOcUv0KBx1q+fIhaML7tEv9D9238lD7mixd8bEEPrgnIOzlg+P4D080WrDfYSyO/GNXjagZGBL2PneL99t2zBItX3fwWqHPcAkUvx+t7b/dW8oraI2Ee20VXLQR3gdrHpHZFeBHfqjyxWZo9e6HQGtlTNQVBca2IXPEYHdpS0jZlp2O88zeSaHQvrbqPFLz5iNpyAJRgcq21kAtAAFJK8fo5ChkAqs8xgCo1KpeKXKP15e8fYQVRc8nixgEzkt8IndkYKPUEUbcphSxpBTguPsP7kq70p2T3GFZH1kF5/QzsJxrEuiC/+f809y/QYeHAW/Ea1m0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Postman ErrorResponse\"\n        title=\"Postman ErrorResponse\"\n        src=\"/static/6850d73364b4433bedf890fbf1cff857/b9e4f/pastedImage_71.png\"\n        srcset=\"/static/6850d73364b4433bedf890fbf1cff857/cf440/pastedImage_71.png 148w,\n/static/6850d73364b4433bedf890fbf1cff857/d2d38/pastedImage_71.png 295w,\n/static/6850d73364b4433bedf890fbf1cff857/b9e4f/pastedImage_71.png 590w,\n/static/6850d73364b4433bedf890fbf1cff857/f9b6a/pastedImage_71.png 885w,\n/static/6850d73364b4433bedf890fbf1cff857/2d849/pastedImage_71.png 1180w,\n/static/6850d73364b4433bedf890fbf1cff857/30051/pastedImage_71.png 1599w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"AWS Signature Authorization using Postman","date":"July 07, 2019","tags":["http","aws","security"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2019-07-07-aws-signature-authorization-using-postman","previous":{"fields":{"slug":"/2019-06-09-uml-sequence-diagrams-using-plantuml"},"frontmatter":{"tags":["uml"]}},"next":{"fields":{"slug":"/2019-08-12-scanning-for-ows-sql-injection-protection"},"frontmatter":{"tags":["security","codequality","devops","powershell"]}}}}}